# golangci-lint configuration for vTeam backend
# Compatible with golangci-lint v2+
#
# This configuration is pragmatic for a Kubernetes-native application.
# We focus on catching real bugs rather than style issues.

version: 2

run:
  timeout: 5m

linters:
  enable:
    - govet         # Reports suspicious constructs
    - ineffassign   # Detect ineffectual assignments
    - staticcheck   # Advanced static analysis (includes many useful checks)
    - unused        # Check for unused constants, variables, functions
    - misspell      # Find commonly misspelled words
  disable:
    - errcheck      # Disabled: too many false positives with defer cleanup

linters-settings:
  staticcheck:
    checks: ["all", "-SA1019", "-ST1005", "-QF1001", "-QF1003", "-QF1008", "-QF1012", "-S1000"]  # Disable deprecations, style, and quick fixes

issues:
  max-issues-per-linter: 0  # Show all issues
  max-same-issues: 0        # Show all instances

  exclude-rules:
    # Exclude all linters from test files
    - path: _test\.go
      linters:
        - staticcheck
        - govet

    # Allow type assertions in K8s unstructured object parsing (intentional pattern)
    - path: (handlers|jira)/.*\.go
      text: "type assertion"

    # Minor code improvements that don't affect correctness
    - text: "QF1003|QF1001|QF1008|QF1012"  # Style suggestions from staticcheck
      linters:
        - staticcheck

    # S1000: for{select{}} is intentional for event loop patterns
    - text: "S1000.*for range"
      linters:
        - staticcheck

  # Show all issues
  new: false
